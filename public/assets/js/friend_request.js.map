{"version":3,"file":"friend_request.js","names":["addFriend","$","click","e","preventDefault","ajax","type","url","this","attr","done","data","newFriend","newFriendDom","toUser","prepend","deleteFriend","Noty","theme","text","layout","timeout","show","fail","err","console","log","friend","_id","avatar","name","deleteLink","prop","success","to_user","remove","error","responseText","convertFriendToAjax","each","self","deleteButton"],"sources":["js/friend_request.js"],"mappings":"AAAA,CACI,IAAIA,EAAY,WACQC,EAAE,mBACRC,OAAM,SAASC,GACzBA,EAAEC,iBAGFH,EAAEI,KAAK,CACHC,KAAM,OACNC,IAAIN,EAJGO,MAIKC,KAAK,UAClBC,MAAK,SAASC,GACb,IAAIC,EAAYC,EAAaF,EAAKA,KAAKG,QACvCb,EAAE,oBAAoBc,QAAQH,GAC9BI,EAAaf,EAAE,kBAAkBW,IAEjC,IAAIK,KAAK,CACLC,MAAO,QACPC,KAAM,kBACNb,KAAM,UACNc,OAAQ,WACRC,QAAS,OACVC,MACP,IAAGC,MAAK,SAASC,GACbC,QAAQC,IAAI,kCAChB,GACJ,GACJ,EAEIb,EAAe,SAASc,GACxB,OAAO1B,EAAE,kBAAmB0B,EAAOC,wCACVD,EAAOE,gBAAkBF,EAAOG,yDAElBH,EAAOC,iCAAmCD,EAAOG,uEAErCH,EAAOC,8EAE9D,EAEIZ,EAAe,SAASe,GACxB9B,EAAE8B,GAAY7B,OAAM,SAASC,GACzBA,EAAEC,iBAEFH,EAAEI,KAAK,CACHC,KAAM,MACNC,IAAKN,EAAE8B,GAAYC,KAAK,QACxBC,QAAS,SAAStB,GACdc,QAAQC,IAAI,2BAA2Bf,GACvCV,EAAE,WAAYU,EAAKA,KAAKuB,WAAYC,SAEpC,IAAIlB,KAAK,CACLC,MAAO,QACPC,KAAM,qBACNb,KAAM,UACNc,OAAQ,WACRC,QAAS,OACVC,MACP,EAAEc,MAAO,SAASA,GACdX,QAAQC,IAAIU,EAAMC,aACtB,GAER,GACJ,EAGIC,EAAsB,WACtBrC,EAAE,uBAAuBsC,MAAK,WAC1B,IAAIC,EAAOvC,EAAEO,MACTiC,EAAexC,EAAE,kBAAmBuC,GACxCxB,EAAayB,EAEjB,GACJ,EAGAzC,IACAsC,GACJ","ignoreList":[],"sourcesContent":["{\r\n    let addFriend = function(){\r\n        let newFriendLink = $('.add-friend-btn');\r\n        newFriendLink.click(function(e){\r\n            e.preventDefault();\r\n            let self = this;\r\n\r\n            $.ajax({\r\n                type: 'post',\r\n                url:$(self).attr('href'),\r\n            }).done(function(data){\r\n                let newFriend = newFriendDom(data.data.toUser);\r\n                $('#user-friends>ul').prepend(newFriend);\r\n                deleteFriend($(' .remove-friend',newFriend));\r\n\r\n                new Noty({\r\n                    theme: 'relax',\r\n                    text: 'Friend Added!!!',\r\n                    type: 'success',\r\n                    layout: 'topRight',\r\n                    timeout: 1500\r\n                }).show();\r\n            }).fail(function(err){\r\n                console.log('error in completing the request');\r\n            });\r\n        })\r\n    }\r\n\r\n    let newFriendDom = function(friend){\r\n        return $(`<li id=\"friend-${ friend._id }\">\r\n                    <img src=\"${ friend.avatar }\" alt=\"${ friend.name }\">\r\n\r\n                    <a href=\"/users/profile/${ friend._id }\" class=\"user-friend-name\">${ friend.name }</a>\r\n\r\n                    <a href=\"/friends/friendship/remove/${ friend._id }\" class=\"remove-friend remove-add-btn\">Remove</a>\r\n                </li>`);\r\n    }\r\n\r\n    let deleteFriend = function(deleteLink){\r\n        $(deleteLink).click(function(e){\r\n            e.preventDefault();\r\n\r\n            $.ajax({\r\n                type: 'get',\r\n                url: $(deleteLink).prop('href'),\r\n                success: function(data){\r\n                    console.log('freind request delete:: ',data);\r\n                    $(`#friend-${ data.data.to_user }`).remove();\r\n\r\n                    new Noty({\r\n                        theme: 'relax',\r\n                        text: \"Friend Deleted !!!\",\r\n                        type: 'success',\r\n                        layout: 'topRight',\r\n                        timeout: 1500\r\n                    }).show();\r\n                },error: function(error){\r\n                    console.log(error.responseText);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n\r\n    let convertFriendToAjax = function(){\r\n        $('#user-friends>ul>li').each(function(){\r\n            let self = $(this);\r\n            let deleteButton = $(' .remove-friend', self);\r\n            deleteFriend(deleteButton);\r\n\r\n        })\r\n    }\r\n\r\n\r\n    addFriend();\r\n    convertFriendToAjax();\r\n}\r\n"]}