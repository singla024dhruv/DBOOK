{"version":3,"file":"toggle_likes.js","names":["ToggleLike","constructor","toggleElement","this","toggler","toggleLike","$","click","e","preventDefault","self","console","log","attr","ajax","type","url","done","data","likesCount","parseInt","deleted","html","fail","errData"],"sources":["js/toggle_likes.js"],"mappings":"AACA,MAAMA,WACF,WAAAC,CAAYC,GACRC,KAAKC,QAAUF,EACfC,KAAKE,YACT,CAGA,UAAAA,GACIC,EAAEH,KAAKC,SAASG,OAAM,SAASC,GAC3BA,EAAEC,iBACF,IAAIC,EAAOP,KACXQ,QAAQC,IAAIN,EAAEI,GAAMG,KAAK,SAEzBP,EAAEQ,KAAK,CACHC,KAAM,OACNC,IAAKV,EAAEI,GAAMG,KAAK,UAErBI,MAAK,SAASC,GACX,IAAIC,EAAaC,SAASd,EAAEI,GAAMG,KAAK,eACvCF,QAAQC,IAAIO,GACa,GAArBD,EAAKA,KAAKG,SACVF,GAAc,EACdb,EAAEI,GAAMG,KAAK,aAAcM,GAC3Bb,EAAEI,GAAMY,KACN,uCAAuCH,OAIzCA,GAAc,EACdb,EAAEI,GAAMG,KAAK,aAAcM,GAC3Bb,EAAEI,GAAMY,KACN,qCAAqCH,KAQ/C,IACCI,MAAK,SAASC,GACXb,QAAQC,IAAI,kCAChB,GAGJ,GACJ","ignoreList":[],"sourcesContent":["// CHANGE :: create a class to toggle likes when a link is clicked, using AJAX\r\nclass ToggleLike{\r\n    constructor(toggleElement){\r\n        this.toggler = toggleElement;\r\n        this.toggleLike();\r\n    }\r\n\r\n\r\n    toggleLike(){\r\n        $(this.toggler).click(function(e){\r\n            e.preventDefault();\r\n            let self = this;\r\n            console.log($(self).attr('href'));\r\n            // this is a new way of writing ajax which you might've studied, it looks like the same as promises\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: $(self).attr('href'),//if you want to get the href attribute of an anchor (<a>) element, you should use .attr('href').\r\n            })\r\n            .done(function(data) {\r\n                let likesCount = parseInt($(self).attr('data-likes'));\r\n                console.log(likesCount);\r\n                if (data.data.deleted == true){\r\n                    likesCount -= 1;\r\n                    $(self).attr(\"data-likes\", likesCount); //etting the value of the data-likes attribute of the HTML element referred to by self to the value of the likesCount variable.\r\n                    $(self).html(\r\n                      `<i class=\"fa-regular fa-heart\"></i> ${likesCount}`\r\n                    );\r\n                    \r\n                }else{\r\n                    likesCount += 1;\r\n                    $(self).attr(\"data-likes\", likesCount); //etting the value of the data-likes attribute of the HTML element referred to by self to the value of the likesCount variable.\r\n                    $(self).html(\r\n                      `<i class=\"fa-solid fa-heart\"></i> ${likesCount}`\r\n                    );\r\n                }\r\n\r\n                \r\n                // window.location.href = '/';\r\n\r\n//n the line $(self).html(${likesCount} Likes);, the backticks are used to create a template literal that incorporates the likesCount variable within the string. This way, you can dynamically include the value of likesCount in the string and display it as part of the HTML conten\r\n            })\r\n            .fail(function(errData) {\r\n                console.log('error in completing the request');\r\n            });\r\n            \r\n\r\n        });\r\n    }\r\n}\r\n"]}