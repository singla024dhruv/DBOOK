{"version":3,"file":"chat_engine.js","names":["ChatEngine","constructor","chatboxid","userEmail","this","chatBox","$","socket","io","connect","connectionHandler","self","on","console","log","emit","user_email","chatroom","data","click","msg","val","message","newMessage","messageType","append","html","addClass"],"sources":["js/chat_engine.js"],"mappings":"AAAA,MAAMA,WACF,WAAAC,CAAYC,EAAUC,GAClBC,KAAKC,QAAUC,EAAE,IAAIJ,KAErBE,KAAKD,UAAYA,EACjBC,KAAKG,OAAOC,GAAGC,QAAQ,yBACpBL,KAAKD,WACJC,KAAKM,mBAEb,CACA,iBAAAA,GACI,IAAIC,EAAKP,KACTA,KAAKG,OAAOK,GAAG,WAAU,WACrBC,QAAQC,IAAI,6CAEZH,EAAKJ,OAAOQ,KAAK,YAAY,CACzBC,WAAWL,EAAKR,UAChBc,SAAU,UAGdN,EAAKJ,OAAOK,GAAG,eAAc,SAASM,GAClCL,QAAQC,IAAI,gBAAgBI,EAChC,GACJ,IACAZ,EAAE,iBAAiBa,OAAM,WACrB,IAAIC,EAAMd,EAAE,uBAAuBe,MACxB,IAAPD,GACAT,EAAKJ,OAAOQ,KAAK,eAAgB,CAC7BO,QAASF,EACTJ,WAAYL,EAAKR,UACjBc,SAAU,SAItB,IACAN,EAAKJ,OAAOK,GAAG,mBAAmB,SAAUM,GACxCL,QAAQC,IAAI,mBAAoBI,EAAKI,SACrC,IAAIC,EAAajB,EAAE,QACfkB,EAAc,gBAEdN,EAAKF,YAAcL,EAAKR,YACxBqB,EAAc,gBAElBD,EAAWE,OAAOnB,EAAE,SAAU,CAC1BoB,KAAQR,EAAKI,WAEjBC,EAAWE,OAAOnB,EAAE,QAAS,CACzBoB,KAAQR,EAAKF,cAEjBO,EAAWI,SAASH,GACpBlB,EAAE,uBAAuBmB,OAAOF,EAAoB,GAC5D","ignoreList":[],"sourcesContent":["class ChatEngine{\r\n    constructor(chatboxid,userEmail){\r\n        this.chatBox = $(`#${chatboxid}`);\r\n        \r\n        this.userEmail = userEmail;\r\n        this.socket=io.connect('http://localhost:5000');\r\n        if(this.userEmail){\r\n            this.connectionHandler();\r\n        }\r\n    }\r\n    connectionHandler(){\r\n        let self=this;\r\n        this.socket.on('connect',function(){\r\n            console.log('connection established using sockets....!');\r\n         \r\n            self.socket.emit('join_room',{\r\n                user_email:self.userEmail,\r\n                chatroom: 'Dbook',\r\n\r\n            });\r\n            self.socket.on('user_joined',function(data){\r\n                console.log('a user joined',data);\r\n            })\r\n        });\r\n        $('#send-message').click(function () {\r\n            let msg = $('#chat-message-input').val();\r\n            if (msg != '') {\r\n                self.socket.emit('send_message', {\r\n                    message: msg,\r\n                    user_email: self.userEmail,\r\n                    chatroom: 'Dbook'\r\n                });\r\n                \r\n            }\r\n        });\r\n        self.socket.on('receive_message', function (data) {\r\n            console.log('message received', data.message);\r\n            let newMessage = $('<li>');\r\n            let messageType = 'other-message'\r\n           \r\n            if (data.user_email == self.userEmail) {\r\n                messageType = 'self-message';\r\n            }\r\n            newMessage.append($('<span>', {\r\n                'html': data.message\r\n            }));\r\n            newMessage.append($('<sub>', {\r\n                'html': data.user_email\r\n            }));\r\n            newMessage.addClass(messageType);\r\n            $('#chat-messages-list').append(newMessage);        })\r\n    }\r\n}"]}